<mat-accordion class="">
    <mat-expansion-panel [expanded]="true" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header class="right-aligned-header">
            <mat-panel-title>
                @if (editView) {
                    <span>Nouvelle news</span>
                } @else {
                    <span>{{ panelTitle }}</span>
                }
            </mat-panel-title>
            <mat-panel-description class="panelDescription">
                <span></span>
                <span></span>
            </mat-panel-description>
        </mat-expansion-panel-header>
        @if (editView) {
            <p>
                <mat-form-field class="textColor" class="addNewsInput">
                    <mat-label class="textColor">Titre</mat-label>
                    <input
                        appCustomMatInputAutofocus
                        [formControl]="titleFormControl"
                        [errorStateMatcher]="matcher"
                        [(ngModel)]="panelTitle"
                        name="panelTitle"
                        type="text"
                        class="textColor"
                        matInput
                        placeholder=""
                        value=""
                    />
                    @if (titleFormControl.hasError('required')) {
                        <mat-error>Le titre ne doit pas être vide</mat-error>
                    }
                </mat-form-field>
            </p>
        }

        @if (editView) {
            <p>
                <mat-form-field class="textColor" class="percent80Width">
                    <mat-label class="textColor">Date</mat-label>
                    <input
                        id = 'dateInput'
                        [formControl]="dateFormControl"
                        [errorStateMatcher]="matcher"
                        [(ngModel)]="panelDate"
                        name="panelDate"
                        type="date"
                        class="textColor"
                        matInput
                        placeholder=""
                        value=""
                    />
                    @if (dateFormControl.hasError('invalidDate')) {
                        <mat-error>La date doit se trouver entre l'an 2000 et l'an 2100</mat-error>
                    }
                </mat-form-field>
                <button mat-stroked-button (click)="recetDate()" class="percent20Width" color="primary">Effacer</button>
            </p>
        } @else {
            @if (panelDate) {
                <p>
                    <span>Date : </span>
                    <span>{{ panelDate }}</span>
                </p>
            }
        }

        @if (editView) {
            <p>
                <mat-form-field class="textColor" class="percent80Width">
                    <mat-label class="textColor">Heure</mat-label>
                    <input
                        id = 'timeInput'
                        [(ngModel)]="panelTime"
                        name="panelTime"
                        type="time"
                        class="textColor"
                        matInput
                        placeholder=""
                        value=""
                    />
                </mat-form-field>
                <button mat-stroked-button (click)="recetTime()" class="percent20Width" color="primary">Effacer</button>
            </p>
        } @else {
            @if (panelTime) {
                <p>
                    <span>Heure : </span>
                    <span>{{ panelTime }}</span>
                </p>
            }
        }

        @if (editView) {
            <p>
                <mat-form-field class="textColor" class="addNewsInput">
                    <mat-label class="textColor">Lieu</mat-label>
                    <input
                        [(ngModel)]="panelLocation"
                        name="panelLocation"
                        type="text"
                        class="textColor"
                        matInput
                        placeholder=""
                        value=""
                    />
                </mat-form-field>
            </p>
        } @else {
            @if (panelLocation != '') {
                <p>
                    <span>Lieu : </span>
                    <span>{{ panelLocation }}</span>
                </p>
            }
        }

        @if (editView) {
            <p>
                <mat-form-field class="textColor" class="addNewsInput">
                    <mat-label class="textColor">Prix</mat-label>
                    <input
                        [(ngModel)]="panelPrice"
                        name="panelPrice"
                        type="text"
                        class="textColor"
                        matInput
                        placeholder=""
                        value=""
                    />
                </mat-form-field>
            </p>
        } @else {
            @if (panelPrice != '') {
                <p>
                    <span>Prix : </span>
                    <span>{{ panelPrice }}</span>
                </p>
            }
        }

        @if (editView) {
            <p>
                <mat-form-field class="textColor" class="addNewsInput">
                    <mat-label class="textColor">Description</mat-label>
                    <textarea
                        [formControl]="descriptionFormControl"
                        [(ngModel)]="panelDescription"
                        name="panelDescription"
                        class="textColor"
                        matInput
                        placeholder=""
                        value=""
                    ></textarea>
                    @if (descriptionFormControl.hasError('required')) {
                        <mat-error>La description ne doit pas être vide</mat-error>
                    }
                </mat-form-field>
            </p>
        } @else {
            <p>
                <span>{{ panelDescription }}</span>
            </p>
        }

        @if (createState) {
            <button mat-flat-button color="warn" (click)="cancel()" class="percent50Width">Annuler</button>
            <button mat-flat-button (click)="add()" class="percent50Width successColorBg text-white">Ajouter</button>
        }
    </mat-expansion-panel>
</mat-accordion>
